# ü§ñ Telegram Welcome Bot

–ë–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—è –∑–∞—è–≤–æ–∫ –≤ Telegram –∫–∞–Ω–∞–ª–∏ –∑ –≤—ñ—Ç–∞–ª—å–Ω–∏–º–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏.

## üìã –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞ join requests
- ‚úÖ –í—ñ—Ç–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ 3 –∫–∞–Ω–∞–ª–∞–º–∏ –¥–ª—è –ø—ñ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–Ø –Ω–µ —Ä–æ–±–æ—Ç" –¥–ª—è –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–¥–æ–±—Ä–µ–Ω–Ω—è –∑–∞—è–≤–æ–∫
- ‚úÖ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—ñ–¥–ø–∏—Å–æ–∫ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ Webhook —Ä–µ–∂–∏–º –¥–ª—è —à–≤–∏–¥–∫–æ—ó —Ä–æ–±–æ—Ç–∏

---

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –°—Ç–≤–æ—Ä–∏ –±–æ—Ç–∞ –≤ Telegram

1. –í—ñ–¥–∫—Ä–∏–π [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –ù–∞–ø–∏—à–∏ `/newbot`
3. –í–≤–µ–¥–∏ –Ω–∞–∑–≤—É —Ç–∞ username –¥–ª—è –±–æ—Ç–∞
4. **–ó–±–µ—Ä–µ–∂–∏ —Ç–æ–∫–µ–Ω** —è–∫–∏–π –≤—ñ–Ω –¥–∞—Å—Ç—å

### 2. Deploy –Ω–∞ Railway

#### –í–∞—Ä—ñ–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ GitHub (—Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è)

1. **Fork —Ü–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π** –Ω–∞ —Å–≤—ñ–π GitHub
2. –ó–∞–π–¥–∏ –Ω–∞ [Railway.app](https://railway.app)
3. –ù–∞—Ç–∏—Å–Ω–∏ **"New Project"** ‚Üí **"Deploy from GitHub"**
4. –û–±–µ—Ä–∏ —Å–≤—ñ–π —Ñ–æ—Ä–∫–Ω—É—Ç–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å Python –ø—Ä–æ–µ–∫—Ç

#### –í–∞—Ä—ñ–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Railway CLI

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏ Railway CLI
npm i -g @railway/cli

# –ó–∞–ª–æ–≥—ñ–Ω—å—Å—è
railway login

# Deploy
railway up
```

### 3. –ù–∞–ª–∞—à—Ç—É–π –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–í Railway ‚Üí **Variables** –¥–æ–¥–∞–π:

| –ö–ª—é—á | –ó–Ω–∞—á–µ–Ω–Ω—è | –ü—Ä–∏–∫–ª–∞–¥ |
|------|----------|---------|
| `BOT_TOKEN` | –¢–æ–∫–µ–Ω –≤—ñ–¥ BotFather | `8224502034:AAG...` |
| `WEBHOOK_URL` | –î–æ–º–µ–Ω –∑ Railway | `https://—Ç–≤—ñ–π-–±–æ—Ç.up.railway.app` |
| `PORT` | 8080 | `8080` |

**WEBHOOK_URL –æ—Ç—Ä–∏–º–∞—î—à —Ç—É—Ç:**
Railway ‚Üí Settings ‚Üí Networking ‚Üí Domains ‚Üí –∫–æ–ø—ñ—é–π URL

### 4. –ù–∞–ª–∞—à—Ç—É–π –∫–∞–Ω–∞–ª–∏

–í—ñ–¥–∫—Ä–∏–π —Ñ–∞–π–ª `bot.py` —ñ –∑–º—ñ–Ω–∏:

```python
CHANNELS = {
    'channel1': {
        'name': '–¢–≤—ñ–π –∫–∞–Ω–∞–ª 1',
        'url': 'https://t.me/—Ç–≤—ñ–π_–∫–∞–Ω–∞–ª_1',
        'id': -1001234567890  # ID –∫–∞–Ω–∞–ª—É
    },
    # ... —ñ–Ω—à—ñ –∫–∞–Ω–∞–ª–∏
}
```

**–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ ID –∫–∞–Ω–∞–ª—É:**
1. –î–æ–¥–∞–π –±–æ—Ç–∞ [@username_to_id_bot](https://t.me/username_to_id_bot) –≤ –∫–∞–Ω–∞–ª
2. –í—ñ–Ω –Ω–∞–ø–∏—à–µ ID –∫–∞–Ω–∞–ª—É
3. –í–∏–¥–∞–ª–∏ –±–æ—Ç–∞ –∑ –∫–∞–Ω–∞–ª—É

---

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–∞–Ω–∞–ª—É

### 1. –£–≤—ñ–º–∫–Ω–∏ —Å—Ö–≤–∞–ª–µ–Ω–Ω—è –∑–∞—è–≤–æ–∫

1. –í—ñ–¥–∫—Ä–∏–π —Å–≤—ñ–π –∫–∞–Ω–∞–ª
2. **‚öôÔ∏è Settings** ‚Üí **Manage Channel**
3. –£–≤—ñ–º–∫–Ω–∏ **"Approve New Members"**

### 2. –î–æ–¥–∞–π –±–æ—Ç–∞ —è–∫ –∞–¥–º—ñ–Ω–∞

1. **Administrators** ‚Üí **Add Admin**
2. –û–±–µ—Ä–∏ —Å–≤–æ–≥–æ –±–æ—Ç–∞
3. –î–∞–π –ø—Ä–∞–≤–∞:
   - ‚úÖ **Add members** (Invite users via link)
   - ‚úÖ **Ban users**

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ü–µ—Ä–µ–≤—ñ—Ä —â–æ –±–æ—Ç –ø—Ä–∞—Ü—é—î:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä —ñ–Ω—Ñ–æ –ø—Ä–æ –±–æ—Ç–∞
https://api.telegram.org/bot<BOT_TOKEN>/getMe

# –ü–µ—Ä–µ–≤—ñ—Ä webhook
https://api.telegram.org/bot<BOT_TOKEN>/getWebhookInfo
```

### –¢–µ—Å—Ç join request:

1. –ó **—ñ–Ω—à–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É** —Å–ø—Ä–æ–±—É–π –ø—Ä–∏—î–¥–Ω–∞—Ç–∏—Å—è –¥–æ –∫–∞–Ω–∞–ª—É
2. –ë–æ—Ç –º–∞—î –Ω–∞–ø–∏—Å–∞—Ç–∏ –≤—ñ—Ç–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
3. –ù–∞—Ç–∏—Å–Ω–∏ "–Ø –Ω–µ —Ä–æ–±–æ—Ç"
4. –ó–∞—è–≤–∫–∞ –º–∞—î –æ–¥–æ–±—Ä–∏—Ç–∏—Å—è

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
telegram-welcome-bot/
‚îú‚îÄ‚îÄ bot.py              # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –∑ –ª–æ–≥—ñ–∫–æ—é
‚îú‚îÄ‚îÄ requirements.txt    # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ Procfile           # –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è Railway
‚îú‚îÄ‚îÄ runtime.txt        # –í–µ—Ä—Å—ñ—è Python
‚îú‚îÄ‚îÄ .env.example       # –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö
‚îî‚îÄ‚îÄ README.md          # –¶—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è
```

---

## üîß –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–ø–∏—Å–æ–∫

–í —Ñ–∞–π–ª—ñ `bot.py` —î —Ñ—É–Ω–∫—Ü—ñ—è `check_subscriptions()`. –†–æ–∑–∫–æ–º–µ–Ω—Ç—É–π —ó—ó –≤ `handle_verify_button()`:

```python
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–ø–∏—Å–æ–∫
subscribed = await check_subscriptions(user.id, context)
if not subscribed:
    await query.edit_message_text("‚ùå –°–ø–æ—á–∞—Ç–∫—É –ø—ñ–¥–ø–∏—à–∏—Å—å –Ω–∞ –≤—Å—ñ 3 –∫–∞–Ω–∞–ª–∏!")
    return
```

**–í–ê–ñ–õ–ò–í–û:** –ë–æ—Ç –º–∞—î –±—É—Ç–∏ –∞–¥–º—ñ–Ω–æ–º —É –≤—Å—ñ—Ö –∫–∞–Ω–∞–ª–∞—Ö –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏!

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (–º–∞–π–±—É—Ç–Ω—î)

–î–æ–¥–∞–º–æ Supabase –¥–ª—è:
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ê–Ω–∞–ª—ñ—Ç–∏–∫–∏

---

## üêõ Troubleshooting

### –ë–æ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ /start

- –ü–µ—Ä–µ–≤—ñ—Ä —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π `BOT_TOKEN`
- –ü–µ—Ä–µ–≤—ñ—Ä –ª–æ–≥–∏ –≤ Railway

### –ë–æ—Ç –Ω–µ –æ–±—Ä–æ–±–ª—è—î join requests

- –ü–µ—Ä–µ–≤—ñ—Ä —á–∏ –±–æ—Ç **–∞–¥–º—ñ–Ω** –≤ –∫–∞–Ω–∞–ª—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä —á–∏ —É–≤—ñ–º–∫–Ω–µ–Ω–æ **"Approve New Members"**
- –ü–µ—Ä–µ–≤—ñ—Ä —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ webhook:
  ```
  https://api.telegram.org/bot<BOT_TOKEN>/getWebhookInfo
  ```

### Webhook –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è

- –ü–µ—Ä–µ–≤—ñ—Ä —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π `WEBHOOK_URL` –≤ –∑–º—ñ–Ω–Ω–∏—Ö
- URL –º–∞—î –±—É—Ç–∏ **HTTPS** (Railway –¥–∞—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
- –°–ø—Ä–æ–±—É–π –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—Ä—É—á–Ω—É:
  ```
  https://—Ç–≤—ñ–π-–¥–æ–º–µ–Ω.up.railway.app/setwebhook
  ```

---

## üìù TODO

- [ ] –î–æ–¥–∞—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö Supabase
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- [ ] –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
- [ ] Captcha –∑–∞–º—ñ—Å—Ç—å –∫–Ω–æ–ø–∫–∏
- [ ] –¢–∞–π–º–∞—É—Ç –¥–ª—è –∑–∞—è–≤–æ–∫
- [ ] –ú—É–ª—å—Ç–∏–º–æ–≤–Ω—ñ—Å—Ç—å

---

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ —î –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏ - —Å—Ç–≤–æ—Ä–∏ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó!

---

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –≤—ñ–ª—å–Ω–æ!

---

**–ó—Ä–æ–±–ª–µ–Ω–æ –∑ ‚ù§Ô∏è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó Telegram –∫–∞–Ω–∞–ª—ñ–≤**
